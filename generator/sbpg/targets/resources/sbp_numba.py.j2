#!/usr/bin/env python
# Copyright (C) 2015-2018 Swift Navigation Inc.
# Contact: Swift Navigation <dev@swiftnav.com>
#
# This source is subject to the license found in the file 'LICENSE' which must
# be be distributed together with this source. All other rights reserved.
#
# THIS CODE AND INFORMATION IS PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND,
# EITHER EXPRESSED OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE IMPLIED
# WARRANTIES OF MERCHANTABILITY AND/OR FITNESS FOR A PARTICULAR PURPOSE.


"""
(((description|comment_links)))
"""

import json

from sbp.jit.msg import SBP, SENDER_ID
from sbp.jit.msg import get_u8, get_u16, get_u32, get_u64
from sbp.jit.msg import get_s8, get_s16, get_s32, get_s64
from sbp.jit.msg import get_f32, get_f64
from sbp.jit.msg import get_string, get_fixed_string
from sbp.jit.msg import get_array, get_fixed_array

((*- for i in include *))
from (((module_path))).jit.(((i))) import *
((*- endfor *))

# Automatically generated from piksi/yaml/(((filepath))) with generate.py.
# Please do not hand edit!

((*- for m in msgs *))
((*- if m.static *))

((*- if m.sbp_id *))
SBP_(((m.identifier))) = ((('0x%04X'|format(m.sbp_id))))
((*- endif *))

((*- if m.sbp_id *))
class ((( m.identifier | classnameify )))(SBP):
  """SBP class for message (((m.identifier))) ((('(0x%04X)'|format(m.sbp_id)))).
((*- else *))
class ((( m.identifier )))(object):
  """SBP class for message (((m.identifier)))
((*- endif *))

  You can have (((m.identifier))) inherit its fields directly
  from an inherited SBP object, or construct it inline using a dict
  of its fields.

  ((* if m.desc *))
  (((m.desc)))
  ((*- endif *))

  """
  ((*- if m.fields *))
  __slots__ = [((*- for f in m.fields *))'((( f.identifier )))',
               ((* endfor *))]
  ((*- else *))
  __slots__ = []
  ((*- endif *))

  ((*- if m.fields *))
  @classmethod
  def parse_members(cls, buf, offset, length):
    o_0 = offset
    ((*- for f in m.fields *))
    o_1, (__(((f.identifier))), offset, length) = offset, ((( f | numba_py )))(buf, offset, length)
    if o_1 == offset:
      return {}, o_0, length
    ((*- endfor *))
    return {
    ((*- for f in m.fields *))
      '(((f.identifier)))' : __(((f.identifier))),
    ((*- endfor *))
    }, offset, length

  def _unpack_members(self, buf, offset, length):
    res, off, length = self.parse_members(buf, offset, length)
    if off == offset:
      return {}, offset, length
    ((*- for f in m.fields *))
    self.(((f.identifier))) = res['(((f.identifier)))']
    ((*- endfor *))
    return res, off, length
  ((* else *))
  ((* endif *))

((*- endif *))
((*- endfor *))

msg_classes = {
((*- for m in msgs *))
  ((*- if m.sbp_id *))
  ((('0x%04X'|format(m.sbp_id)))): ((( m.identifier | classnameify ))),
  ((*- endif*))
((*- endfor *))
}
